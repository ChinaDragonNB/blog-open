<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ak47007.mapper.ArticleTagMapper">
    <resultMap id="BaseResultMap" type="com.ak47007.model.ArticleTag">
        <!--@mbg.generated-->
        <!--@Table article_tag-->
        <id column="id" jdbcType="BIGINT" property="id"/>
        <result column="article_id" jdbcType="BIGINT" property="articleId"/>
        <result column="tag_id" jdbcType="BIGINT" property="tagId"/>
    </resultMap>
    <sql id="Base_Column_List">
        <!--@mbg.generated-->
        id, article_id, tag_id
    </sql>
    <select id="tagCount" resultType="int">
        select count(1)
        from article_tag
        where tag_id = #{tagId}
    </select>
    <select id="findTagByArticleId" resultType="java.lang.Long">
        select tag_id
        from article_tag
        where article_id = #{articleId};
    </select>
    <select id="getMaxId" resultType="int">
        select max(id)
        from article_tag
    </select>

    <!--auto generated by MybatisCodeHelper on 2019-10-06-->
    <delete id="deleteByArticleId">
        delete
        from article_tag
        where article_id = #{articleId,jdbcType=BIGINT}
    </delete>

    <delete id="deleteBatch">
        <if test="tagIdList != null and tagIdList.size() != 0">
            delete
            from article_tag
                    where article_id = #{articleId}
                      and tag_id not in
            <foreach collection="tagIdList" item="item" open="(" separator="," close=")">
                #{item}
            </foreach>
        </if>
    </delete>
</mapper>